<html>
<head>
<style>

</style>
</head>
<body>

<h1></h1>

<!DOCTYPE html>
<html>
  
<head>
    <title>full screen iframe</title>
    <style type="text/css">
        html {
            overflow: auto;
        }
          
        html,
        body,
        div,
        iframe {
            margin: 0px;
            padding: 0px;
            height: 100%;
            border: none;
        }
          
        iframe {
            display: block;
            width: 100%;
            border: none;
            overflow-y: auto;
            overflow-x: hidden;
        }
    </style>
</head>
  <script>
  // Sends new address to iframe
  let frame: any;
  const eth: any = (window as any).ethereum;
  const updateWeb3Api = async () => {
    frame.contentWindow.postMessage(
      { type: "ethAddress", address: $ethAddress },
      config.iframeUrl
    );
  };

  // This triggers every time there's a new address. With vanilla js you should listen for `eth_accountsChanged` metamask event here.
  $: if (loaded && $ethAddress) {
    updateWeb3Api();
  }

  // Listen for events from iframe (to open Connect page in new tab or close it)
  let registered: boolean = false;
  let eventer: any;
  let manageWindow: any;
  const eventHandler = (e: any) => {
    if (e.data === "goToManage") {
      manageWindow = window.open(config.iframeUrl + "/manage", "_blank");
    }
    if (e.data === "closeManage") {
      manageWindow.close();
    }
  };

  // Mount eventListener
  onMount(() => {
    if (!registered) {
      registered = true;
      // Listen to message from child window
      window.addEventListener("message", eventHandler);
    }
  });

  // Unmount eventListener
  onDestroy(() => {
    loaded = false;
    if (registered) {
      window.removeEventListener("message", eventHandler);
    }
    registered = false;
  });
</script>


<iframe
  on:load={() => (loaded = true)}
  id="iframe"
  src="{config.iframeUrl}/{urlExt}"
  bind:this={frame}
  {style} />
<body>
    <iframe src="https://dappos.io/SherpuppyAirdrop"
            frameborder="0" 
            marginheight="0" 
            marginwidth="0" 
            width="100%" 
            height="100%" 
            scrolling="auto">
  </iframe>
  
</body>
  
</html>

</body>
</html>
